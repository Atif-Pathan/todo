"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunktodo_app"] = self["webpackChunktodo_app"] || []).push([["src_components_EmbedForm_js"],{

/***/ "./src/components/EmbedForm.js":
/*!*************************************!*\
  !*** ./src/components/EmbedForm.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   openEmbeddedForm: () => (/* binding */ openEmbeddedForm)\n/* harmony export */ });\n/* harmony import */ var _modules_TaskManager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../modules/TaskManager.js */ \"./src/modules/TaskManager.js\");\n\r\n\r\nfunction openEmbeddedForm(currentTabId = null, editRow = false, todoId = null, categoryName = null, editPressed = false) {\r\n\r\n  const row = document.querySelector(\".todo-item-row\");\r\n  console.log(categoryName);\r\n  console.log(todoId);\r\n  let currentCategory = null;\r\n  let todoItemRow = null;\r\n  if (categoryName && todoId) {\r\n    currentCategory = _modules_TaskManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getCategoryByName(categoryName);\r\n    todoItemRow = currentCategory.getTodoById(todoId);\r\n  }\r\n  const contentView = document.querySelector(\".content-view\");\r\n  if (!contentView) return console.warn(\"No .content-view found!\");\r\n\r\n  // don’t duplicate form if already one in place\r\n  if (contentView.querySelector(\".embedded-form\")) {\r\n    return; \r\n  }\r\n\r\n  const formContainer = document.createElement(\"div\");\r\n  formContainer.classList.add(\"embedded-form\");\r\n\r\n  // Title input\r\n  const titleDiv = document.createElement(\"div\");\r\n  titleDiv.classList.add(\"title-div\");\r\n  const titleLabel = document.createElement(\"label\");\r\n  titleLabel.textContent = \"Title (required):\";\r\n  titleLabel.htmlFor = 'title';\r\n  const titleInput = document.createElement(\"input\");\r\n  titleInput.type = \"text\";\r\n  titleInput.required = true;\r\n  titleInput.id = \"title\";\r\n  titleInput.placeholder = \"Title\";\r\n  titleInput.addEventListener(\"keydown\", (e) => {\r\n    if (e.key === \"Enter\" && titleInput.value.trim()) {\r\n      if (editRow) {\r\n        handleUpdateTodo();\r\n      } else {\r\n        handleCreateTodo();\r\n      }\r\n    }\r\n  })\r\n//   titleDiv.appendChild(titleLabel);\r\n  titleDiv.appendChild(titleInput);\r\n\r\n  // Description input\r\n  const descDiv = document.createElement(\"div\");\r\n  descDiv.classList.add(\"desc-div\");\r\n  const descriptionLabel = document.createElement(\"label\");\r\n  descriptionLabel.textContent = \"Description:\";\r\n  descriptionLabel.htmlFor = \"description\";\r\n  const descriptionInput = document.createElement(\"textarea\");\r\n  descriptionInput.id = \"description\";\r\n  descriptionInput.maxLength = 400;\r\n  descriptionInput.placeholder = \"Description\";\r\n//   descDiv.appendChild(descriptionLabel);\r\n  descDiv.appendChild(descriptionInput);\r\n\r\n  // Due date input\r\n  const dueDateDiv = document.createElement(\"div\");\r\n  dueDateDiv.classList.add(\"due-date-div\");\r\n  const dueDateLabel = document.createElement(\"label\");\r\n  dueDateLabel.textContent = \"Due Date\";\r\n  dueDateLabel.htmlFor = \"select-date\";\r\n  const dueDateInput = document.createElement(\"input\");\r\n  dueDateInput.type = \"date\";\r\n  dueDateInput.id = \"select-date\";\r\n\r\n  // if (currentTabId && currentTabId.startsWith(\"today\")) {\r\n    // pre-populate date to today\r\n    const today = new Date(); // Get today's date\r\n    const year = today.getFullYear(); // Get the year\r\n    const month = String(today.getMonth() + 1).padStart(2, '0'); // Get the month, pad to 2 digits\r\n    const day = String(today.getDate()).padStart(2, '0'); // Get the day, pad to 2 digits\r\n    dueDateInput.value = `${year}-${month}-${day}`;\r\n  // }\r\n   \r\n  dueDateDiv.appendChild(dueDateLabel);\r\n  dueDateDiv.appendChild(dueDateInput);\r\n\r\n  // Priority input\r\n  const prioDiv = document.createElement(\"div\");\r\n  prioDiv.classList.add(\"prio-div\");\r\n  const priorityLabel = document.createElement(\"label\");\r\n  priorityLabel.textContent = \"Priority\";\r\n  priorityLabel.htmlFor = \"prio\";\r\n  const prioritySelect = document.createElement(\"select\");\r\n  prioritySelect.id = \"prio\";\r\n  const priorities = [\"Low\", \"Medium\", \"High\"];\r\n  priorities.forEach((priority) => {\r\n    const option = document.createElement(\"option\");\r\n    option.value = priority.toLowerCase();\r\n    option.textContent = priority;\r\n    prioritySelect.appendChild(option);\r\n  });\r\n  prioDiv.appendChild(priorityLabel);\r\n  prioDiv.appendChild(prioritySelect);\r\n\r\n  // Category dropdown\r\n  const catDiv = document.createElement(\"div\");\r\n  catDiv.classList.add(\"cat-div\");\r\n  const categoryLabel = document.createElement(\"label\");\r\n  categoryLabel.textContent = \"Category\";\r\n  categoryLabel.htmlFor = \"category-select\";\r\n  const categorySelect = document.createElement(\"select\");\r\n  categorySelect.id = \"category-select\";\r\n  catDiv.appendChild(categoryLabel);\r\n  catDiv.appendChild(categorySelect);\r\n\r\n  // “Create New Category” hidden input\r\n  const newCatInputDiv = document.createElement(\"div\");\r\n  newCatInputDiv.classList.add(\"new-category-input-div\");\r\n  const newCategoryInput = document.createElement(\"input\");\r\n  newCategoryInput.type = \"text\";\r\n  newCategoryInput.placeholder = \"Enter new category\";\r\n  newCategoryInput.classList.add(\"new-category-input\");\r\n  newCategoryInput.disabled = true;\r\n  // newCategoryInput.style.display = \"none\";\r\n  newCatInputDiv.appendChild(newCategoryInput);\r\n\r\n  // Populate categories\r\n  function populateCategories() {\r\n    categorySelect.innerHTML = \"\";\r\n    const categories = _modules_TaskManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getAllCategories();\r\n    if (categories.length === 0) {\r\n      const noCatOption = document.createElement(\"option\");\r\n      noCatOption.value = \"\";\r\n      noCatOption.textContent = \"No categories available\";\r\n      noCatOption.disabled = true;\r\n      noCatOption.selected = true;\r\n      categorySelect.appendChild(noCatOption);\r\n    } else {\r\n      categories.forEach((cat) => {\r\n        const option = document.createElement(\"option\");\r\n        option.value = cat.name;\r\n        option.textContent = cat.name;\r\n        categorySelect.appendChild(option);\r\n      });\r\n    }\r\n\r\n    // Add “Create New Category” option\r\n    const createOption = document.createElement(\"option\");\r\n    createOption.value = \"create-new\";\r\n    createOption.textContent = \"Add New Category\";\r\n    if (!editPressed) {\r\n      categorySelect.appendChild(createOption);\r\n    }\r\n\r\n    // Figure out which category to preselect\r\n    let preselectName = null;\r\n\r\n    // If currentTabId is a category (like \"category-Work\")\r\n    if (currentTabId && currentTabId.startsWith(\"category-\")) {\r\n      const catName = currentTabId.replace(\"category-\", \"\");\r\n      const foundCat = _modules_TaskManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getCategoryByName(catName);\r\n      if (foundCat) {\r\n        preselectName = foundCat.name;\r\n      }\r\n    }\r\n\r\n    // Otherwise default to \"General\" if it exists\r\n    if (!preselectName) {\r\n      const generalCat = _modules_TaskManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getCategoryByName(\"General\");\r\n      if (generalCat) {\r\n        preselectName = \"General\";\r\n      } else if (categories.length > 0) {\r\n        preselectName = categories[0].name;\r\n      }\r\n    }\r\n\r\n    if (preselectName) {\r\n      categorySelect.value = preselectName;\r\n    }\r\n  }\r\n\r\n  populateCategories();\r\n\r\n  categorySelect.addEventListener(\"change\", () => {\r\n    if (categorySelect.value === \"create-new\") {\r\n      newCategoryInput.disabled = false;\r\n      newCategoryInput.focus();\r\n    } else {\r\n      newCategoryInput.disabled = true;\r\n    }\r\n  });\r\n\r\n  // The “Create” + “Cancel” buttons\r\n  const buttonContainer = document.createElement(\"div\");\r\n  buttonContainer.classList.add(\"modal-buttons\");\r\n\r\n  const createButton = document.createElement(\"button\");\r\n  createButton.textContent = \"Create\";\r\n  createButton.addEventListener(\"click\", () => {\r\n    if (editRow) {\r\n      handleUpdateTodo();\r\n    } else {\r\n      handleCreateTodo();\r\n    }\r\n  });\r\n\r\n  const cancelButton = document.createElement(\"button\");\r\n  cancelButton.textContent = \"Cancel\";\r\n  cancelButton.addEventListener(\"click\", handleCancel);\r\n\r\n  buttonContainer.appendChild(createButton);\r\n  buttonContainer.appendChild(cancelButton);\r\n\r\n  // Append all inputs to the container\r\n//   formContainer.appendChild(titleLabel);\r\n//   formContainer.appendChild(titleInput);\r\n  formContainer.appendChild(titleDiv);\r\n\r\n//   formContainer.appendChild(descriptionLabel);\r\n//   formContainer.appendChild(descriptionInput);\r\n  formContainer.appendChild(descDiv);\r\n\r\n//   formContainer.appendChild(dueDateLabel);\r\n//   formContainer.appendChild(dueDateInput);\r\n  formContainer.appendChild(dueDateDiv);\r\n\r\n//   formContainer.appendChild(priorityLabel);\r\n//   formContainer.appendChild(prioritySelect);\r\n  formContainer.appendChild(prioDiv);\r\n\r\n//   formContainer.appendChild(categoryLabel);\r\n//   formContainer.appendChild(categorySelect);\r\n  formContainer.appendChild(catDiv);\r\n  formContainer.appendChild(newCatInputDiv);\r\n  \r\n  formContainer.appendChild(buttonContainer);\r\n\r\n  const contentHeader = contentView.querySelector(\".content-header\");\r\n  if (contentHeader) {\r\n    contentHeader.insertAdjacentElement(\"afterend\", formContainer);\r\n  } else {\r\n    // fallback: just append to contentView\r\n    contentView.appendChild(formContainer);\r\n  }\r\n\r\n  if (editRow && todoItemRow) {\r\n    titleInput.value = todoItemRow.getTitle();\r\n    descriptionInput.value = todoItemRow.getDescription();\r\n    categorySelect.value = categoryName;\r\n    prioritySelect.value  = todoItemRow.getPriority();\r\n    dueDateInput.value = todoItemRow.getDueDate();\r\n  }\r\n\r\n  function handleUpdateTodo() {\r\n    const currCat = categorySelect.value;\r\n    if (categorySelect.options.length > 0) {\r\n      console.log(\"removed\");\r\n      \r\n      const lastIndex = categorySelect.options.length - 1; // Get the index of the last option\r\n      categorySelect.remove(lastIndex); // Remove the last option\r\n    }\r\n    // console.log(\"updated\");\r\n    \r\n    const updatedDetails = {\r\n      title: titleInput.value.trim(),\r\n      description: descriptionInput.value.trim(),\r\n      dueDate: dueDateInput.value ? parseDueDate(dueDateInput.value) : null,\r\n      priority: prioritySelect.value,\r\n      // status: todoItemRow.getStatus()\r\n    };\r\n    // update first\r\n    _modules_TaskManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateTodo(todoId, categoryName, updatedDetails);\r\n    console.log(\"todo updated!\");\r\n    console.log(categoryName);\r\n    console.log(currentTabId);\r\n    // then move if needed\r\n    if (currCat !== categoryName) {\r\n      console.log(currCat);\r\n      console.log(categoryName);\r\n      \r\n      // need to update category/ move todo\r\n      // throw new Error(\"error, cant change category\");\r\n      _modules_TaskManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].moveTodo(todoId, categoryName, currCat);\r\n      console.log(`moved todo from ${categoryName} to ${currCat}`);\r\n    }   \r\n    if ((categoryName !== \"upcoming\" || categoryName !== \"today\") && categoryName === currentTabId.replace('category-', '')) {\r\n      const radioId = `category-${categoryName}`;\r\n      const radioBtn = document.getElementById(radioId);\r\n      if (radioBtn) {\r\n        radioBtn.checked = true;\r\n        console.log(`radio btn checked for: ${radioId}`);\r\n        console.log(`current tab: ${currentTabId}`);\r\n      }\r\n      console.log(`current status: ${todoItemRow.getStatus()}`);\r\n    }\r\n    if (todoItemRow.getStatus() === 'overdue') {\r\n      row.classList.add('overdue');\r\n    } else {\r\n      row.classList.remove('overdue');\r\n    }\r\n    handleCancel();\r\n  }\r\n\r\n  // === CREATE BUTTON LOGIC ===\r\n  function handleCreateTodo() {\r\n    const todoDetails = {\r\n      title: titleInput.value.trim(),\r\n      description: descriptionInput.value.trim(),\r\n      dueDate: dueDateInput.value ? parseDueDate(dueDateInput.value) : null,\r\n      priority: prioritySelect.value,\r\n    };\r\n\r\n    if (!todoDetails.title) {\r\n      alert(\"Title is required.\");\r\n      return;\r\n    }\r\n\r\n    let chosenCategory = categorySelect.value;\r\n    if (chosenCategory === \"create-new\") {\r\n      const newCatName = newCategoryInput.value.trim();\r\n      if (!newCatName) {\r\n        alert(\"Category name is required.\");\r\n        return;\r\n      }\r\n      const formatted = newCatName.charAt(0).toUpperCase() + newCatName.slice(1);\r\n      try {\r\n        _modules_TaskManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].createCategory(formatted);\r\n        chosenCategory = formatted;\r\n      } catch (error) {\r\n        alert(error.message);\r\n        return;\r\n      }\r\n    }\r\n\r\n    try {\r\n      _modules_TaskManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].addTodoToCategory(todoDetails, chosenCategory);\r\n      // Optionally: Switch to the newly added category’s tab\r\n      const radioId = `category-${chosenCategory}`;\r\n      const radioEl = document.getElementById(radioId);\r\n      if (radioEl) {\r\n        radioEl.checked = true;\r\n        console.log(`${radioId} checked`);\r\n        \r\n        const evt = new Event(\"change\", { bubbles: true });\r\n        radioEl.dispatchEvent(evt);\r\n      }\r\n      // Hide the embedded form\r\n      handleCancel();\r\n    } catch (err) {\r\n      alert(err.message);\r\n    }\r\n  }\r\n\r\n  function parseDueDate(inputValue) {\r\n    const [year, month, day] = inputValue.split(\"-\").map(Number);\r\n    return new Date(year, month - 1, day);\r\n  }\r\n\r\n  function handleCancel() {\r\n    // Remove the form from the DOM\r\n    if (formContainer.parentNode) {\r\n      formContainer.parentNode.removeChild(formContainer);\r\n    }\r\n  }\r\n\r\n  titleInput.focus();\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFxQyx3QkFBd0I7QUFDN0Q7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrREFBVztBQUNuQjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLCtEQUFXO0FBQ2pCO0FBQ0Esa0NBQWtDLGVBQWU7QUFDakQ7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFNBQVM7QUFDaEM7QUFDQSwwQ0FBMEMsZUFBZTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWFwcC8uL3NyYy9jb21wb25lbnRzL0VtYmVkRm9ybS5qcz83OTg1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUYXNrTWFuYWdlciBmcm9tIFwiLi4vbW9kdWxlcy9UYXNrTWFuYWdlci5qc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG9wZW5FbWJlZGRlZEZvcm0oY3VycmVudFRhYklkID0gbnVsbCwgZWRpdFJvdyA9IGZhbHNlLCB0b2RvSWQgPSBudWxsLCBjYXRlZ29yeU5hbWUgPSBudWxsLCBlZGl0UHJlc3NlZCA9IGZhbHNlKSB7XHJcblxyXG4gIGNvbnN0IHJvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1pdGVtLXJvd1wiKTtcclxuICBjb25zb2xlLmxvZyhjYXRlZ29yeU5hbWUpO1xyXG4gIGNvbnNvbGUubG9nKHRvZG9JZCk7XHJcbiAgbGV0IGN1cnJlbnRDYXRlZ29yeSA9IG51bGw7XHJcbiAgbGV0IHRvZG9JdGVtUm93ID0gbnVsbDtcclxuICBpZiAoY2F0ZWdvcnlOYW1lICYmIHRvZG9JZCkge1xyXG4gICAgY3VycmVudENhdGVnb3J5ID0gVGFza01hbmFnZXIuZ2V0Q2F0ZWdvcnlCeU5hbWUoY2F0ZWdvcnlOYW1lKTtcclxuICAgIHRvZG9JdGVtUm93ID0gY3VycmVudENhdGVnb3J5LmdldFRvZG9CeUlkKHRvZG9JZCk7XHJcbiAgfVxyXG4gIGNvbnN0IGNvbnRlbnRWaWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50LXZpZXdcIik7XHJcbiAgaWYgKCFjb250ZW50VmlldykgcmV0dXJuIGNvbnNvbGUud2FybihcIk5vIC5jb250ZW50LXZpZXcgZm91bmQhXCIpO1xyXG5cclxuICAvLyBkb27igJl0IGR1cGxpY2F0ZSBmb3JtIGlmIGFscmVhZHkgb25lIGluIHBsYWNlXHJcbiAgaWYgKGNvbnRlbnRWaWV3LnF1ZXJ5U2VsZWN0b3IoXCIuZW1iZWRkZWQtZm9ybVwiKSkge1xyXG4gICAgcmV0dXJuOyBcclxuICB9XHJcblxyXG4gIGNvbnN0IGZvcm1Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGZvcm1Db250YWluZXIuY2xhc3NMaXN0LmFkZChcImVtYmVkZGVkLWZvcm1cIik7XHJcblxyXG4gIC8vIFRpdGxlIGlucHV0XHJcbiAgY29uc3QgdGl0bGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIHRpdGxlRGl2LmNsYXNzTGlzdC5hZGQoXCJ0aXRsZS1kaXZcIik7XHJcbiAgY29uc3QgdGl0bGVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuICB0aXRsZUxhYmVsLnRleHRDb250ZW50ID0gXCJUaXRsZSAocmVxdWlyZWQpOlwiO1xyXG4gIHRpdGxlTGFiZWwuaHRtbEZvciA9ICd0aXRsZSc7XHJcbiAgY29uc3QgdGl0bGVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICB0aXRsZUlucHV0LnR5cGUgPSBcInRleHRcIjtcclxuICB0aXRsZUlucHV0LnJlcXVpcmVkID0gdHJ1ZTtcclxuICB0aXRsZUlucHV0LmlkID0gXCJ0aXRsZVwiO1xyXG4gIHRpdGxlSW5wdXQucGxhY2Vob2xkZXIgPSBcIlRpdGxlXCI7XHJcbiAgdGl0bGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIgJiYgdGl0bGVJbnB1dC52YWx1ZS50cmltKCkpIHtcclxuICAgICAgaWYgKGVkaXRSb3cpIHtcclxuICAgICAgICBoYW5kbGVVcGRhdGVUb2RvKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaGFuZGxlQ3JlYXRlVG9kbygpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSlcclxuLy8gICB0aXRsZURpdi5hcHBlbmRDaGlsZCh0aXRsZUxhYmVsKTtcclxuICB0aXRsZURpdi5hcHBlbmRDaGlsZCh0aXRsZUlucHV0KTtcclxuXHJcbiAgLy8gRGVzY3JpcHRpb24gaW5wdXRcclxuICBjb25zdCBkZXNjRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkZXNjRGl2LmNsYXNzTGlzdC5hZGQoXCJkZXNjLWRpdlwiKTtcclxuICBjb25zdCBkZXNjcmlwdGlvbkxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xyXG4gIGRlc2NyaXB0aW9uTGFiZWwudGV4dENvbnRlbnQgPSBcIkRlc2NyaXB0aW9uOlwiO1xyXG4gIGRlc2NyaXB0aW9uTGFiZWwuaHRtbEZvciA9IFwiZGVzY3JpcHRpb25cIjtcclxuICBjb25zdCBkZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xyXG4gIGRlc2NyaXB0aW9uSW5wdXQuaWQgPSBcImRlc2NyaXB0aW9uXCI7XHJcbiAgZGVzY3JpcHRpb25JbnB1dC5tYXhMZW5ndGggPSA0MDA7XHJcbiAgZGVzY3JpcHRpb25JbnB1dC5wbGFjZWhvbGRlciA9IFwiRGVzY3JpcHRpb25cIjtcclxuLy8gICBkZXNjRGl2LmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uTGFiZWwpO1xyXG4gIGRlc2NEaXYuYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb25JbnB1dCk7XHJcblxyXG4gIC8vIER1ZSBkYXRlIGlucHV0XHJcbiAgY29uc3QgZHVlRGF0ZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgZHVlRGF0ZURpdi5jbGFzc0xpc3QuYWRkKFwiZHVlLWRhdGUtZGl2XCIpO1xyXG4gIGNvbnN0IGR1ZURhdGVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuICBkdWVEYXRlTGFiZWwudGV4dENvbnRlbnQgPSBcIkR1ZSBEYXRlXCI7XHJcbiAgZHVlRGF0ZUxhYmVsLmh0bWxGb3IgPSBcInNlbGVjdC1kYXRlXCI7XHJcbiAgY29uc3QgZHVlRGF0ZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gIGR1ZURhdGVJbnB1dC50eXBlID0gXCJkYXRlXCI7XHJcbiAgZHVlRGF0ZUlucHV0LmlkID0gXCJzZWxlY3QtZGF0ZVwiO1xyXG5cclxuICAvLyBpZiAoY3VycmVudFRhYklkICYmIGN1cnJlbnRUYWJJZC5zdGFydHNXaXRoKFwidG9kYXlcIikpIHtcclxuICAgIC8vIHByZS1wb3B1bGF0ZSBkYXRlIHRvIHRvZGF5XHJcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7IC8vIEdldCB0b2RheSdzIGRhdGVcclxuICAgIGNvbnN0IHllYXIgPSB0b2RheS5nZXRGdWxsWWVhcigpOyAvLyBHZXQgdGhlIHllYXJcclxuICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKHRvZGF5LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpOyAvLyBHZXQgdGhlIG1vbnRoLCBwYWQgdG8gMiBkaWdpdHNcclxuICAgIGNvbnN0IGRheSA9IFN0cmluZyh0b2RheS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7IC8vIEdldCB0aGUgZGF5LCBwYWQgdG8gMiBkaWdpdHNcclxuICAgIGR1ZURhdGVJbnB1dC52YWx1ZSA9IGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWA7XHJcbiAgLy8gfVxyXG4gICBcclxuICBkdWVEYXRlRGl2LmFwcGVuZENoaWxkKGR1ZURhdGVMYWJlbCk7XHJcbiAgZHVlRGF0ZURpdi5hcHBlbmRDaGlsZChkdWVEYXRlSW5wdXQpO1xyXG5cclxuICAvLyBQcmlvcml0eSBpbnB1dFxyXG4gIGNvbnN0IHByaW9EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIHByaW9EaXYuY2xhc3NMaXN0LmFkZChcInByaW8tZGl2XCIpO1xyXG4gIGNvbnN0IHByaW9yaXR5TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XHJcbiAgcHJpb3JpdHlMYWJlbC50ZXh0Q29udGVudCA9IFwiUHJpb3JpdHlcIjtcclxuICBwcmlvcml0eUxhYmVsLmh0bWxGb3IgPSBcInByaW9cIjtcclxuICBjb25zdCBwcmlvcml0eVNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7XHJcbiAgcHJpb3JpdHlTZWxlY3QuaWQgPSBcInByaW9cIjtcclxuICBjb25zdCBwcmlvcml0aWVzID0gW1wiTG93XCIsIFwiTWVkaXVtXCIsIFwiSGlnaFwiXTtcclxuICBwcmlvcml0aWVzLmZvckVhY2goKHByaW9yaXR5KSA9PiB7XHJcbiAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgb3B0aW9uLnZhbHVlID0gcHJpb3JpdHkudG9Mb3dlckNhc2UoKTtcclxuICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IHByaW9yaXR5O1xyXG4gICAgcHJpb3JpdHlTZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICB9KTtcclxuICBwcmlvRGl2LmFwcGVuZENoaWxkKHByaW9yaXR5TGFiZWwpO1xyXG4gIHByaW9EaXYuYXBwZW5kQ2hpbGQocHJpb3JpdHlTZWxlY3QpO1xyXG5cclxuICAvLyBDYXRlZ29yeSBkcm9wZG93blxyXG4gIGNvbnN0IGNhdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgY2F0RGl2LmNsYXNzTGlzdC5hZGQoXCJjYXQtZGl2XCIpO1xyXG4gIGNvbnN0IGNhdGVnb3J5TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XHJcbiAgY2F0ZWdvcnlMYWJlbC50ZXh0Q29udGVudCA9IFwiQ2F0ZWdvcnlcIjtcclxuICBjYXRlZ29yeUxhYmVsLmh0bWxGb3IgPSBcImNhdGVnb3J5LXNlbGVjdFwiO1xyXG4gIGNvbnN0IGNhdGVnb3J5U2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcclxuICBjYXRlZ29yeVNlbGVjdC5pZCA9IFwiY2F0ZWdvcnktc2VsZWN0XCI7XHJcbiAgY2F0RGl2LmFwcGVuZENoaWxkKGNhdGVnb3J5TGFiZWwpO1xyXG4gIGNhdERpdi5hcHBlbmRDaGlsZChjYXRlZ29yeVNlbGVjdCk7XHJcblxyXG4gIC8vIOKAnENyZWF0ZSBOZXcgQ2F0ZWdvcnnigJ0gaGlkZGVuIGlucHV0XHJcbiAgY29uc3QgbmV3Q2F0SW5wdXREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIG5ld0NhdElucHV0RGl2LmNsYXNzTGlzdC5hZGQoXCJuZXctY2F0ZWdvcnktaW5wdXQtZGl2XCIpO1xyXG4gIGNvbnN0IG5ld0NhdGVnb3J5SW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgbmV3Q2F0ZWdvcnlJbnB1dC50eXBlID0gXCJ0ZXh0XCI7XHJcbiAgbmV3Q2F0ZWdvcnlJbnB1dC5wbGFjZWhvbGRlciA9IFwiRW50ZXIgbmV3IGNhdGVnb3J5XCI7XHJcbiAgbmV3Q2F0ZWdvcnlJbnB1dC5jbGFzc0xpc3QuYWRkKFwibmV3LWNhdGVnb3J5LWlucHV0XCIpO1xyXG4gIG5ld0NhdGVnb3J5SW5wdXQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIC8vIG5ld0NhdGVnb3J5SW5wdXQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gIG5ld0NhdElucHV0RGl2LmFwcGVuZENoaWxkKG5ld0NhdGVnb3J5SW5wdXQpO1xyXG5cclxuICAvLyBQb3B1bGF0ZSBjYXRlZ29yaWVzXHJcbiAgZnVuY3Rpb24gcG9wdWxhdGVDYXRlZ29yaWVzKCkge1xyXG4gICAgY2F0ZWdvcnlTZWxlY3QuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBUYXNrTWFuYWdlci5nZXRBbGxDYXRlZ29yaWVzKCk7XHJcbiAgICBpZiAoY2F0ZWdvcmllcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgY29uc3Qgbm9DYXRPcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICBub0NhdE9wdGlvbi52YWx1ZSA9IFwiXCI7XHJcbiAgICAgIG5vQ2F0T3B0aW9uLnRleHRDb250ZW50ID0gXCJObyBjYXRlZ29yaWVzIGF2YWlsYWJsZVwiO1xyXG4gICAgICBub0NhdE9wdGlvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIG5vQ2F0T3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgY2F0ZWdvcnlTZWxlY3QuYXBwZW5kQ2hpbGQobm9DYXRPcHRpb24pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2F0ZWdvcmllcy5mb3JFYWNoKChjYXQpID0+IHtcclxuICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICAgIG9wdGlvbi52YWx1ZSA9IGNhdC5uYW1lO1xyXG4gICAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IGNhdC5uYW1lO1xyXG4gICAgICAgIGNhdGVnb3J5U2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkZCDigJxDcmVhdGUgTmV3IENhdGVnb3J54oCdIG9wdGlvblxyXG4gICAgY29uc3QgY3JlYXRlT3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgIGNyZWF0ZU9wdGlvbi52YWx1ZSA9IFwiY3JlYXRlLW5ld1wiO1xyXG4gICAgY3JlYXRlT3B0aW9uLnRleHRDb250ZW50ID0gXCJBZGQgTmV3IENhdGVnb3J5XCI7XHJcbiAgICBpZiAoIWVkaXRQcmVzc2VkKSB7XHJcbiAgICAgIGNhdGVnb3J5U2VsZWN0LmFwcGVuZENoaWxkKGNyZWF0ZU9wdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmlndXJlIG91dCB3aGljaCBjYXRlZ29yeSB0byBwcmVzZWxlY3RcclxuICAgIGxldCBwcmVzZWxlY3ROYW1lID0gbnVsbDtcclxuXHJcbiAgICAvLyBJZiBjdXJyZW50VGFiSWQgaXMgYSBjYXRlZ29yeSAobGlrZSBcImNhdGVnb3J5LVdvcmtcIilcclxuICAgIGlmIChjdXJyZW50VGFiSWQgJiYgY3VycmVudFRhYklkLnN0YXJ0c1dpdGgoXCJjYXRlZ29yeS1cIikpIHtcclxuICAgICAgY29uc3QgY2F0TmFtZSA9IGN1cnJlbnRUYWJJZC5yZXBsYWNlKFwiY2F0ZWdvcnktXCIsIFwiXCIpO1xyXG4gICAgICBjb25zdCBmb3VuZENhdCA9IFRhc2tNYW5hZ2VyLmdldENhdGVnb3J5QnlOYW1lKGNhdE5hbWUpO1xyXG4gICAgICBpZiAoZm91bmRDYXQpIHtcclxuICAgICAgICBwcmVzZWxlY3ROYW1lID0gZm91bmRDYXQubmFtZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE90aGVyd2lzZSBkZWZhdWx0IHRvIFwiR2VuZXJhbFwiIGlmIGl0IGV4aXN0c1xyXG4gICAgaWYgKCFwcmVzZWxlY3ROYW1lKSB7XHJcbiAgICAgIGNvbnN0IGdlbmVyYWxDYXQgPSBUYXNrTWFuYWdlci5nZXRDYXRlZ29yeUJ5TmFtZShcIkdlbmVyYWxcIik7XHJcbiAgICAgIGlmIChnZW5lcmFsQ2F0KSB7XHJcbiAgICAgICAgcHJlc2VsZWN0TmFtZSA9IFwiR2VuZXJhbFwiO1xyXG4gICAgICB9IGVsc2UgaWYgKGNhdGVnb3JpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHByZXNlbGVjdE5hbWUgPSBjYXRlZ29yaWVzWzBdLm5hbWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAocHJlc2VsZWN0TmFtZSkge1xyXG4gICAgICBjYXRlZ29yeVNlbGVjdC52YWx1ZSA9IHByZXNlbGVjdE5hbWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwb3B1bGF0ZUNhdGVnb3JpZXMoKTtcclxuXHJcbiAgY2F0ZWdvcnlTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICBpZiAoY2F0ZWdvcnlTZWxlY3QudmFsdWUgPT09IFwiY3JlYXRlLW5ld1wiKSB7XHJcbiAgICAgIG5ld0NhdGVnb3J5SW5wdXQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgbmV3Q2F0ZWdvcnlJbnB1dC5mb2N1cygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbmV3Q2F0ZWdvcnlJbnB1dC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vIFRoZSDigJxDcmVhdGXigJ0gKyDigJxDYW5jZWzigJ0gYnV0dG9uc1xyXG4gIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgYnV0dG9uQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJtb2RhbC1idXR0b25zXCIpO1xyXG5cclxuICBjb25zdCBjcmVhdGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gIGNyZWF0ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQ3JlYXRlXCI7XHJcbiAgY3JlYXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBpZiAoZWRpdFJvdykge1xyXG4gICAgICBoYW5kbGVVcGRhdGVUb2RvKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBoYW5kbGVDcmVhdGVUb2RvKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgY2FuY2VsQnV0dG9uLnRleHRDb250ZW50ID0gXCJDYW5jZWxcIjtcclxuICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUNhbmNlbCk7XHJcblxyXG4gIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVCdXR0b24pO1xyXG4gIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW5jZWxCdXR0b24pO1xyXG5cclxuICAvLyBBcHBlbmQgYWxsIGlucHV0cyB0byB0aGUgY29udGFpbmVyXHJcbi8vICAgZm9ybUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXRsZUxhYmVsKTtcclxuLy8gICBmb3JtQ29udGFpbmVyLmFwcGVuZENoaWxkKHRpdGxlSW5wdXQpO1xyXG4gIGZvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGVEaXYpO1xyXG5cclxuLy8gICBmb3JtQ29udGFpbmVyLmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uTGFiZWwpO1xyXG4vLyAgIGZvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb25JbnB1dCk7XHJcbiAgZm9ybUNvbnRhaW5lci5hcHBlbmRDaGlsZChkZXNjRGl2KTtcclxuXHJcbi8vICAgZm9ybUNvbnRhaW5lci5hcHBlbmRDaGlsZChkdWVEYXRlTGFiZWwpO1xyXG4vLyAgIGZvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQoZHVlRGF0ZUlucHV0KTtcclxuICBmb3JtQ29udGFpbmVyLmFwcGVuZENoaWxkKGR1ZURhdGVEaXYpO1xyXG5cclxuLy8gICBmb3JtQ29udGFpbmVyLmFwcGVuZENoaWxkKHByaW9yaXR5TGFiZWwpO1xyXG4vLyAgIGZvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQocHJpb3JpdHlTZWxlY3QpO1xyXG4gIGZvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQocHJpb0Rpdik7XHJcblxyXG4vLyAgIGZvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQoY2F0ZWdvcnlMYWJlbCk7XHJcbi8vICAgZm9ybUNvbnRhaW5lci5hcHBlbmRDaGlsZChjYXRlZ29yeVNlbGVjdCk7XHJcbiAgZm9ybUNvbnRhaW5lci5hcHBlbmRDaGlsZChjYXREaXYpO1xyXG4gIGZvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQobmV3Q2F0SW5wdXREaXYpO1xyXG4gIFxyXG4gIGZvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uQ29udGFpbmVyKTtcclxuXHJcbiAgY29uc3QgY29udGVudEhlYWRlciA9IGNvbnRlbnRWaWV3LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudC1oZWFkZXJcIik7XHJcbiAgaWYgKGNvbnRlbnRIZWFkZXIpIHtcclxuICAgIGNvbnRlbnRIZWFkZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJlbmRcIiwgZm9ybUNvbnRhaW5lcik7XHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIGZhbGxiYWNrOiBqdXN0IGFwcGVuZCB0byBjb250ZW50Vmlld1xyXG4gICAgY29udGVudFZpZXcuYXBwZW5kQ2hpbGQoZm9ybUNvbnRhaW5lcik7XHJcbiAgfVxyXG5cclxuICBpZiAoZWRpdFJvdyAmJiB0b2RvSXRlbVJvdykge1xyXG4gICAgdGl0bGVJbnB1dC52YWx1ZSA9IHRvZG9JdGVtUm93LmdldFRpdGxlKCk7XHJcbiAgICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gdG9kb0l0ZW1Sb3cuZ2V0RGVzY3JpcHRpb24oKTtcclxuICAgIGNhdGVnb3J5U2VsZWN0LnZhbHVlID0gY2F0ZWdvcnlOYW1lO1xyXG4gICAgcHJpb3JpdHlTZWxlY3QudmFsdWUgID0gdG9kb0l0ZW1Sb3cuZ2V0UHJpb3JpdHkoKTtcclxuICAgIGR1ZURhdGVJbnB1dC52YWx1ZSA9IHRvZG9JdGVtUm93LmdldER1ZURhdGUoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZVVwZGF0ZVRvZG8oKSB7XHJcbiAgICBjb25zdCBjdXJyQ2F0ID0gY2F0ZWdvcnlTZWxlY3QudmFsdWU7XHJcbiAgICBpZiAoY2F0ZWdvcnlTZWxlY3Qub3B0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwicmVtb3ZlZFwiKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGxhc3RJbmRleCA9IGNhdGVnb3J5U2VsZWN0Lm9wdGlvbnMubGVuZ3RoIC0gMTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBvcHRpb25cclxuICAgICAgY2F0ZWdvcnlTZWxlY3QucmVtb3ZlKGxhc3RJbmRleCk7IC8vIFJlbW92ZSB0aGUgbGFzdCBvcHRpb25cclxuICAgIH1cclxuICAgIC8vIGNvbnNvbGUubG9nKFwidXBkYXRlZFwiKTtcclxuICAgIFxyXG4gICAgY29uc3QgdXBkYXRlZERldGFpbHMgPSB7XHJcbiAgICAgIHRpdGxlOiB0aXRsZUlucHV0LnZhbHVlLnRyaW0oKSxcclxuICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uSW5wdXQudmFsdWUudHJpbSgpLFxyXG4gICAgICBkdWVEYXRlOiBkdWVEYXRlSW5wdXQudmFsdWUgPyBwYXJzZUR1ZURhdGUoZHVlRGF0ZUlucHV0LnZhbHVlKSA6IG51bGwsXHJcbiAgICAgIHByaW9yaXR5OiBwcmlvcml0eVNlbGVjdC52YWx1ZSxcclxuICAgICAgLy8gc3RhdHVzOiB0b2RvSXRlbVJvdy5nZXRTdGF0dXMoKVxyXG4gICAgfTtcclxuICAgIC8vIHVwZGF0ZSBmaXJzdFxyXG4gICAgVGFza01hbmFnZXIudXBkYXRlVG9kbyh0b2RvSWQsIGNhdGVnb3J5TmFtZSwgdXBkYXRlZERldGFpbHMpO1xyXG4gICAgY29uc29sZS5sb2coXCJ0b2RvIHVwZGF0ZWQhXCIpO1xyXG4gICAgY29uc29sZS5sb2coY2F0ZWdvcnlOYW1lKTtcclxuICAgIGNvbnNvbGUubG9nKGN1cnJlbnRUYWJJZCk7XHJcbiAgICAvLyB0aGVuIG1vdmUgaWYgbmVlZGVkXHJcbiAgICBpZiAoY3VyckNhdCAhPT0gY2F0ZWdvcnlOYW1lKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGN1cnJDYXQpO1xyXG4gICAgICBjb25zb2xlLmxvZyhjYXRlZ29yeU5hbWUpO1xyXG4gICAgICBcclxuICAgICAgLy8gbmVlZCB0byB1cGRhdGUgY2F0ZWdvcnkvIG1vdmUgdG9kb1xyXG4gICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJlcnJvciwgY2FudCBjaGFuZ2UgY2F0ZWdvcnlcIik7XHJcbiAgICAgIFRhc2tNYW5hZ2VyLm1vdmVUb2RvKHRvZG9JZCwgY2F0ZWdvcnlOYW1lLCBjdXJyQ2F0KTtcclxuICAgICAgY29uc29sZS5sb2coYG1vdmVkIHRvZG8gZnJvbSAke2NhdGVnb3J5TmFtZX0gdG8gJHtjdXJyQ2F0fWApO1xyXG4gICAgfSAgIFxyXG4gICAgaWYgKChjYXRlZ29yeU5hbWUgIT09IFwidXBjb21pbmdcIiB8fCBjYXRlZ29yeU5hbWUgIT09IFwidG9kYXlcIikgJiYgY2F0ZWdvcnlOYW1lID09PSBjdXJyZW50VGFiSWQucmVwbGFjZSgnY2F0ZWdvcnktJywgJycpKSB7XHJcbiAgICAgIGNvbnN0IHJhZGlvSWQgPSBgY2F0ZWdvcnktJHtjYXRlZ29yeU5hbWV9YDtcclxuICAgICAgY29uc3QgcmFkaW9CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyYWRpb0lkKTtcclxuICAgICAgaWYgKHJhZGlvQnRuKSB7XHJcbiAgICAgICAgcmFkaW9CdG4uY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgY29uc29sZS5sb2coYHJhZGlvIGJ0biBjaGVja2VkIGZvcjogJHtyYWRpb0lkfWApO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBjdXJyZW50IHRhYjogJHtjdXJyZW50VGFiSWR9YCk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc29sZS5sb2coYGN1cnJlbnQgc3RhdHVzOiAke3RvZG9JdGVtUm93LmdldFN0YXR1cygpfWApO1xyXG4gICAgfVxyXG4gICAgaWYgKHRvZG9JdGVtUm93LmdldFN0YXR1cygpID09PSAnb3ZlcmR1ZScpIHtcclxuICAgICAgcm93LmNsYXNzTGlzdC5hZGQoJ292ZXJkdWUnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJvdy5jbGFzc0xpc3QucmVtb3ZlKCdvdmVyZHVlJyk7XHJcbiAgICB9XHJcbiAgICBoYW5kbGVDYW5jZWwoKTtcclxuICB9XHJcblxyXG4gIC8vID09PSBDUkVBVEUgQlVUVE9OIExPR0lDID09PVxyXG4gIGZ1bmN0aW9uIGhhbmRsZUNyZWF0ZVRvZG8oKSB7XHJcbiAgICBjb25zdCB0b2RvRGV0YWlscyA9IHtcclxuICAgICAgdGl0bGU6IHRpdGxlSW5wdXQudmFsdWUudHJpbSgpLFxyXG4gICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb25JbnB1dC52YWx1ZS50cmltKCksXHJcbiAgICAgIGR1ZURhdGU6IGR1ZURhdGVJbnB1dC52YWx1ZSA/IHBhcnNlRHVlRGF0ZShkdWVEYXRlSW5wdXQudmFsdWUpIDogbnVsbCxcclxuICAgICAgcHJpb3JpdHk6IHByaW9yaXR5U2VsZWN0LnZhbHVlLFxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoIXRvZG9EZXRhaWxzLnRpdGxlKSB7XHJcbiAgICAgIGFsZXJ0KFwiVGl0bGUgaXMgcmVxdWlyZWQuXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGNob3NlbkNhdGVnb3J5ID0gY2F0ZWdvcnlTZWxlY3QudmFsdWU7XHJcbiAgICBpZiAoY2hvc2VuQ2F0ZWdvcnkgPT09IFwiY3JlYXRlLW5ld1wiKSB7XHJcbiAgICAgIGNvbnN0IG5ld0NhdE5hbWUgPSBuZXdDYXRlZ29yeUlucHV0LnZhbHVlLnRyaW0oKTtcclxuICAgICAgaWYgKCFuZXdDYXROYW1lKSB7XHJcbiAgICAgICAgYWxlcnQoXCJDYXRlZ29yeSBuYW1lIGlzIHJlcXVpcmVkLlwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgZm9ybWF0dGVkID0gbmV3Q2F0TmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5ld0NhdE5hbWUuc2xpY2UoMSk7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgVGFza01hbmFnZXIuY3JlYXRlQ2F0ZWdvcnkoZm9ybWF0dGVkKTtcclxuICAgICAgICBjaG9zZW5DYXRlZ29yeSA9IGZvcm1hdHRlZDtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBhbGVydChlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBUYXNrTWFuYWdlci5hZGRUb2RvVG9DYXRlZ29yeSh0b2RvRGV0YWlscywgY2hvc2VuQ2F0ZWdvcnkpO1xyXG4gICAgICAvLyBPcHRpb25hbGx5OiBTd2l0Y2ggdG8gdGhlIG5ld2x5IGFkZGVkIGNhdGVnb3J54oCZcyB0YWJcclxuICAgICAgY29uc3QgcmFkaW9JZCA9IGBjYXRlZ29yeS0ke2Nob3NlbkNhdGVnb3J5fWA7XHJcbiAgICAgIGNvbnN0IHJhZGlvRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyYWRpb0lkKTtcclxuICAgICAgaWYgKHJhZGlvRWwpIHtcclxuICAgICAgICByYWRpb0VsLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGAke3JhZGlvSWR9IGNoZWNrZWRgKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBldnQgPSBuZXcgRXZlbnQoXCJjaGFuZ2VcIiwgeyBidWJibGVzOiB0cnVlIH0pO1xyXG4gICAgICAgIHJhZGlvRWwuZGlzcGF0Y2hFdmVudChldnQpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIEhpZGUgdGhlIGVtYmVkZGVkIGZvcm1cclxuICAgICAgaGFuZGxlQ2FuY2VsKCk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgYWxlcnQoZXJyLm1lc3NhZ2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcGFyc2VEdWVEYXRlKGlucHV0VmFsdWUpIHtcclxuICAgIGNvbnN0IFt5ZWFyLCBtb250aCwgZGF5XSA9IGlucHV0VmFsdWUuc3BsaXQoXCItXCIpLm1hcChOdW1iZXIpO1xyXG4gICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoIC0gMSwgZGF5KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZUNhbmNlbCgpIHtcclxuICAgIC8vIFJlbW92ZSB0aGUgZm9ybSBmcm9tIHRoZSBET01cclxuICAgIGlmIChmb3JtQ29udGFpbmVyLnBhcmVudE5vZGUpIHtcclxuICAgICAgZm9ybUNvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGZvcm1Db250YWluZXIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdGl0bGVJbnB1dC5mb2N1cygpO1xyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/EmbedForm.js\n");

/***/ })

}]);